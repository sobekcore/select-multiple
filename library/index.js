!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SelectMultiple=t():e.SelectMultiple=t()}(self,(()=>(()=>{"use strict";var e={586:(e,t,n)=>{n.d(t,{Z:()=>s});var E=n(81),l=n.n(E),o=n(645),i=n.n(o)()(l());i.push([e.id,'/**\n * All the necessary styles for the select-multiple package\n */\n\nselect-multiple *, select-multiple *::before, select-multiple *::after {\n  box-sizing: border-box;\n}\n\nselect-multiple {\n  position: relative;\n  display: inline-block;\n\n  --select-multiple-font-color: #000000;\n  --select-multiple-font-invert-color: #000000;\n  --select-multiple-background-color: #ffffff;\n  --select-multiple-border-color: #767676;\n  --select-multiple-shadow-color: #00000040;\n\n  --select-multiple-font-size: 13.3333px;\n\n  --select-multiple-tag-height: 20px;\n  --select-multiple-tag-gap: 4px;\n\n  --select-multiple-list-height: 206px;\n  --select-multiple-item-height: 17px;\n}\n\n@media (prefers-color-scheme: dark) {\n  select-multiple {\n    --select-multiple-font-color: #ffffff;\n    --select-multiple-font-invert-color: #000000;\n    --select-multiple-background-color: #3b3b3b;\n    --select-multiple-border-color: #858585;\n  }\n}\n\nselect-multiple + select[multiple] {\n  display: none !important;\n}\n\nselect-multiple[data-loading="true"] *:not(select-input) {\n  visibility: hidden;\n  opacity: 0;\n}\n\nselect-multiple select-input {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--select-multiple-tag-gap);\n  background: var(--select-multiple-background-color);\n  border: 1px solid var(--select-multiple-border-color);\n  border-radius: 2px;\n  min-height: 30px;\n  padding: 4px;\n}\n\nselect-multiple select-input::before {\n  content: attr(data-placeholder) "\\200B";\n  color: var(--select-multiple-font-color);\n  line-height: var(--select-multiple-tag-height);\n  font-size: var(--select-multiple-font-size);\n  font-family: Arial;\n  opacity: 0.5;\n}\n\nselect-multiple select-input:focus {\n  outline: 2px solid var(--select-multiple-font-color);\n  outline-offset: -1px;\n  border-radius: 3px;\n}\n\nselect-multiple select-input:not(:empty)::before {\n  content: "\\200B"; /* Zero-width space */\n}\n\nselect-multiple select-input select-tag:first-child {\n  margin-left: calc(-1 * var(--select-multiple-tag-gap));\n}\n\nselect-multiple select-input select-tag:focus-within {\n  color: var(--select-multiple-font-invert-color);\n  background: Highlight;\n}\n\nselect-multiple select-input select-tag {\n  display: flex;\n  align-items: center;\n  column-gap: 2px;\n  font-family: Arial;\n  font-size: var(--select-multiple-font-size);\n  color: var(--select-multiple-font-color);\n  height: var(--select-multiple-tag-height);\n  background: var(--select-multiple-background-color);\n  border: 1px solid var(--select-multiple-border-color);\n  border-radius: 2px;\n  padding: 0 3px;\n  cursor: default;\n}\n\nselect-multiple select-input select-tag select-remove {\n  font-size: var(--select-multiple-tag-height);\n  line-height: var(--select-multiple-tag-height);\n  margin-right: -1px;\n  padding: 0 1px;\n  user-select: none;\n  cursor: pointer;\n}\n\nselect-multiple select-input select-tag select-remove:focus-visible {\n  outline: none;\n}\n\nselect-multiple select-list {\n  visibility: hidden;\n  position: absolute;\n  list-style: none;\n  user-select: none;\n  overflow-y: scroll;\n  background: var(--select-multiple-background-color);\n  box-shadow: 0 0 16px var(--select-multiple-shadow-color);\n  border: 1px solid var(--select-multiple-border-color);\n  max-height: var(--select-multiple-list-height);\n  min-width: min-content;\n  width: 100%;\n  padding: 0;\n  margin: 0;\n  z-index: 1;\n}\n\nselect-multiple select-list[data-visible="true"] {\n  visibility: visible;\n}\n\nselect-multiple select-list select-item {\n  display: list-item;\n  font-family: Arial;\n  font-size: var(--select-multiple-font-size);\n  color: var(--select-multiple-font-color);\n  min-height: var(--select-multiple-item-height);\n  padding: 1px 4px;\n}\n\nselect-multiple select-list select-item[data-visible="false"] {\n  display: none;\n}\n\nselect-multiple select-list select-item:focus-visible {\n  color: var(--select-multiple-font-invert-color);\n  background: Highlight;\n  outline: none;\n}\n\nselect-multiple select-list select-item:hover {\n  color: var(--select-multiple-font-invert-color);\n  background: Highlight;\n  cursor: pointer;\n}\n',""]);const s=i.toString()},828:(e,t,n)=>{n.d(t,{Z:()=>s});var E=n(81),l=n.n(E),o=n(645),i=n.n(o)()(l());i.push([e.id,"select-multiple {\n  --select-multiple-custom-font-color: #ffffff;\n  --select-multiple-custom-background-color: #5897fb;\n}\n\nselect-input {\n  min-height: 38px;\n  padding: 6px;\n  gap: 6px;\n}\n\nselect-input::before {\n  line-height: 24px;\n}\n\nselect-tag {\n  color: var(--select-multiple-custom-font-color);\n  background: var(--select-multiple-custom-background-color);\n  padding: 0 6px;\n  height: 24px;\n  border: none;\n}\n\nselect-tag:first-child {\n  margin-left: -6px;\n}\n\nselect-remove {\n  font-size: 24px;\n  line-height: 24px;\n}\n\nselect-item:focus-visible {\n  color: var(--select-multiple-custom-font-color);\n  background: var(--select-multiple-custom-background-color);\n}\n\nselect-item:hover {\n  color: var(--select-multiple-custom-font-color);\n  background: var(--select-multiple-custom-background-color);\n}\n",""]);const s=i.toString()},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",E=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),E&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),E&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,E,l,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(E)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var T=0;T<e.length;T++){var r=[].concat(e[T]);E&&i[r[0]]||(void 0!==o&&(void 0===r[5]||(r[1]="@layer".concat(r[5].length>0?" ".concat(r[5]):""," {").concat(r[1],"}")),r[5]=o),n&&(r[2]?(r[1]="@media ".concat(r[2]," {").concat(r[1],"}"),r[2]=n):r[2]=n),l&&(r[4]?(r[1]="@supports (".concat(r[4],") {").concat(r[1],"}"),r[4]=l):r[4]="".concat(l)),t.push(r))}},t}},81:e=>{e.exports=function(e){return e[1]}}},t={};function n(E){var l=t[E];if(void 0!==l)return l.exports;var o=t[E]={id:E,exports:{}};return e[E](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var E in t)n.o(t,E)&&!n.o(e,E)&&Object.defineProperty(e,E,{enumerable:!0,get:t[E]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var E={};return(()=>{n.d(E,{default:()=>u});const e={KEYCODE_TAB:"Tab",KEYCODE_ESCAPE:"Escape",KEYCODE_ENTER:"Enter",KEYCODE_SPACE:"Space",KEYCODE_ARROW_UP:"ArrowUp",KEYCODE_ARROW_DOWN:"ArrowDown",KEYCODE_ARROW_LEFT:"ArrowLeft",KEYCODE_ARROW_RIGHT:"ArrowRight",ELEMENT_SELECT_BASE:"select",ELEMENT_SELECT_MULTIPLE:"select-multiple",ELEMENT_SELECT_INPUT:"select-input",ELEMENT_SELECT_LIST:"select-list",ELEMENT_SELECT_ITEM:"select-item",ELEMENT_SELECT_TAG:"select-tag",ELEMENT_SELECT_REMOVE:"select-remove",EVENT_CLICK:"click",EVENT_MOUSEDOWN:"mousedown",EVENT_KEYDOWN:"keydown",EVENT_SELECT_OPEN:"select-open",EVENT_SELECT_CLOSE:"select-close",ATTRIBUTES_COMMON:"common",ATTRIBUTE_ARIA_LABEL:"aria-label",ATTRIBUTE_ARIA_HIDDEN:"aria-hidden",ATTRIBUTE_VALUE:"data-value",ATTRIBUTE_VISIBILITY:"data-visible",ATTRIBUTE_LOADING:"data-loading",ATTRIBUTE_PLACEHOLDER:"data-placeholder",ATTRIBUTE_ROLE:"role",ATTRIBUTE_TABINDEX:"tabindex",ATTRIBUTE_TEXT:"text",ATTRIBUTE_HTML:"html",THEME_MODERN:"modern"},t={[e.ELEMENT_SELECT_MULTIPLE]:{[e.ELEMENT_SELECT_INPUT]:{},[e.ELEMENT_SELECT_LIST]:{[e.ELEMENT_SELECT_ITEM]:{}}}},l={[e.ELEMENT_SELECT_MULTIPLE]:{[e.ATTRIBUTES_COMMON]:[{name:e.ATTRIBUTE_LOADING,value:!0}]},[e.ELEMENT_SELECT_INPUT]:{[e.ATTRIBUTES_COMMON]:[{name:e.ATTRIBUTE_ROLE,value:"input"},{name:e.ATTRIBUTE_TABINDEX,value:0}]},[e.ELEMENT_SELECT_LIST]:{[e.ATTRIBUTES_COMMON]:[{name:e.ATTRIBUTE_ROLE,value:"listbox"},{name:e.ATTRIBUTE_VISIBILITY,value:!1}]},[e.ELEMENT_SELECT_ITEM]:{[e.ATTRIBUTES_COMMON]:[{name:e.ATTRIBUTE_ROLE,value:"option"},{name:e.ATTRIBUTE_TABINDEX,value:-1},{name:e.ATTRIBUTE_VISIBILITY,value:!0}]},[e.ELEMENT_SELECT_TAG]:{},[e.ELEMENT_SELECT_REMOVE]:{[e.ATTRIBUTES_COMMON]:[{name:e.ATTRIBUTE_ARIA_HIDDEN,value:!0},{name:e.ATTRIBUTE_TABINDEX,value:-1}]}};class SelectElement{constructor(t,n){if(this.element=t,n[e.ATTRIBUTE_HTML]&&(t.innerHTML=n[e.ATTRIBUTE_HTML]),n[e.ATTRIBUTE_TEXT]&&(t.innerText=n[e.ATTRIBUTE_TEXT]),n[e.ATTRIBUTES_COMMON])for(const E of n[e.ATTRIBUTES_COMMON])t.setAttribute(E.name,E.value)}getChildrenByAttribute(e,t){return Array.from(this.element.children).filter((n=>n.getAttribute(e)===t))}visibility(t){this.element.setAttribute(e.ATTRIBUTE_VISIBILITY,t)}isVisible(){return"true"===this.element.getAttribute(e.ATTRIBUTE_VISIBILITY)}loader(t){this.element.setAttribute(e.ATTRIBUTE_LOADING,t)}isLoading(){return"true"===this.element.getAttribute(e.ATTRIBUTE_LOADING)}focus(){this.element.focus()}remove(){this.element.remove()}}class SelectItem extends SelectElement{constructor(t){super(document.createElement(e.ELEMENT_SELECT_ITEM),t)}}class SelectTag extends SelectElement{constructor(t){super(document.createElement(e.ELEMENT_SELECT_TAG),t)}}class SelectRemove extends SelectElement{constructor(t){super(document.createElement(e.ELEMENT_SELECT_REMOVE),t)}}const o={[e.ELEMENT_SELECT_MULTIPLE]:class SelectMultiple extends SelectElement{constructor(t){super(document.createElement(e.ELEMENT_SELECT_MULTIPLE),t)}selectOpenEvent(){const t=new Event(e.EVENT_SELECT_OPEN);this.element.dispatchEvent(t)}selectCloseEvent(){const t=new Event(e.EVENT_SELECT_CLOSE);this.element.dispatchEvent(t)}},[e.ELEMENT_SELECT_INPUT]:class SelectInput extends SelectElement{constructor(t){super(document.createElement(e.ELEMENT_SELECT_INPUT),t)}},[e.ELEMENT_SELECT_LIST]:class SelectList extends SelectElement{constructor(t){super(document.createElement(e.ELEMENT_SELECT_LIST),t)}},[e.ELEMENT_SELECT_ITEM]:SelectItem,[e.ELEMENT_SELECT_TAG]:SelectTag,[e.ELEMENT_SELECT_REMOVE]:SelectRemove},i=t=>{t.preventDefault(),document.activeElement.tagName.toLowerCase()===e.ELEMENT_SELECT_REMOVE&&document.activeElement.blur()},s={[e.ELEMENT_SELECT_MULTIPLE]:(t,n)=>{((t,n)=>{const E=t[e.ELEMENT_SELECT_BASE],l=t[e.ELEMENT_SELECT_MULTIPLE];E.before(l.element)})(t),((t,n)=>{const E=t[e.ELEMENT_SELECT_MULTIPLE],l=t[e.ELEMENT_SELECT_INPUT],o=t[e.ELEMENT_SELECT_LIST];E.element.addEventListener(e.EVENT_SELECT_OPEN,(()=>{o.visibility(!0)})),E.element.addEventListener(e.EVENT_SELECT_CLOSE,(()=>{o.visibility(!1),l.focus()}))})(t)},[e.ELEMENT_SELECT_INPUT]:(t,n)=>{((t,n)=>{const E=t[e.ELEMENT_SELECT_MULTIPLE],l=t[e.ELEMENT_SELECT_INPUT];E.element.append(l.element)})(t),((t,n)=>{const E=t[e.ELEMENT_SELECT_BASE],l=t[e.ELEMENT_SELECT_INPUT],o=E.getAttribute("placeholder");o&&o.length&&l.element.setAttribute(e.ATTRIBUTE_PLACEHOLDER,o)})(t),((t,n)=>{const E=t[e.ELEMENT_SELECT_MULTIPLE],l=t[e.ELEMENT_SELECT_INPUT],o=t[e.ELEMENT_SELECT_LIST];let i=0,s=0,c=e.ELEMENT_SELECT_ITEM;l.element.addEventListener(e.EVENT_KEYDOWN,(t=>{if(t.target.tagName.toLowerCase()===e.ELEMENT_SELECT_INPUT&&(t.code===e.KEYCODE_SPACE||t.code===e.KEYCODE_ENTER)){E.selectOpenEvent(),t.stopPropagation();const n=o.getChildrenByAttribute(e.ATTRIBUTE_VISIBILITY,"true");0!==n.length&&n[i].focus()}})),window.addEventListener(e.EVENT_KEYDOWN,(t=>{let n=!1,T=!1;if(o.isVisible()){const r=o.getChildrenByAttribute(e.ATTRIBUTE_VISIBILITY,"true"),a=Array.from(l.element.querySelectorAll(e.ELEMENT_SELECT_REMOVE));t.code!==e.KEYCODE_TAB&&t.code!==e.KEYCODE_ESCAPE||E.selectCloseEvent(),t.code===e.KEYCODE_ENTER&&(c===e.ELEMENT_SELECT_ITEM&&r[i]instanceof HTMLElement&&(setTimeout((()=>{r[i].click(),1===r.length&&o.visibility(!1)})),i<r.length-1&&(r[i+1].focus(),c=e.ELEMENT_SELECT_ITEM),1===r.length&&l.focus()),c===e.ELEMENT_SELECT_REMOVE&&a[s]instanceof HTMLElement&&(a[s].click(),o.visibility(!0),setTimeout((()=>{s<a.length-1&&(a[s+1].focus(),c=e.ELEMENT_SELECT_REMOVE),1===a.length&&l.focus()})))),t.code===e.KEYCODE_ARROW_UP&&(c!==e.ELEMENT_SELECT_ITEM&&(i=0,n=!0),!n&&i>0&&(i--,n=!0)),t.code===e.KEYCODE_ARROW_DOWN&&(c!==e.ELEMENT_SELECT_ITEM&&(i=0,n=!0),!n&&i<r.length-1&&(i++,n=!0)),t.code===e.KEYCODE_ARROW_LEFT&&(c!==e.ELEMENT_SELECT_REMOVE&&(s=0,T=!0),!T&&s>0&&(s--,T=!0)),t.code===e.KEYCODE_ARROW_RIGHT&&(c!==e.ELEMENT_SELECT_REMOVE&&(s=0,T=!0),!T&&s<a.length-1&&(s++,T=!0)),n&&r[i]instanceof HTMLElement&&(r[i].focus(),c=e.ELEMENT_SELECT_ITEM,t.preventDefault()),T&&a[s]instanceof HTMLElement&&(a[s].focus(),c=e.ELEMENT_SELECT_REMOVE,t.preventDefault())}}))})(t)},[e.ELEMENT_SELECT_LIST]:(t,n)=>{((t,n)=>{const E=t[e.ELEMENT_SELECT_MULTIPLE],l=t[e.ELEMENT_SELECT_LIST];E.element.append(l.element)})(t),((t,n)=>{const E=t[e.ELEMENT_SELECT_MULTIPLE],l=t[e.ELEMENT_SELECT_LIST];E.element.addEventListener(e.EVENT_CLICK,(()=>{l.visibility(!0)}))})(t),((t,n)=>{const E=t[e.ELEMENT_SELECT_MULTIPLE],l=t[e.ELEMENT_SELECT_LIST];document.addEventListener(e.EVENT_CLICK,(e=>{E.element.contains(e.target)||l.visibility(!1)}))})(t)},[e.ELEMENT_SELECT_ITEM]:(t,n)=>{((t,n)=>{const E=t[e.ELEMENT_SELECT_BASE],o=t[e.ELEMENT_SELECT_INPUT],s=t[e.ELEMENT_SELECT_LIST],c=E.querySelectorAll("option");for(const t of c){const n=l[e.ELEMENT_SELECT_ITEM];n[e.ATTRIBUTE_TEXT]=t.innerText,n[e.ATTRIBUTES_COMMON].push({name:e.ATTRIBUTE_VALUE,value:t.value});const E=new SelectItem(n);s.element.append(E.element),E.element.addEventListener(e.EVENT_CLICK,(n=>{E.visibility(!1),t.setAttribute("selected","selected");const s=l[e.ELEMENT_SELECT_TAG];s[e.ATTRIBUTE_TEXT]=n.target.innerText;const c=new SelectTag(s);o.element.append(c.element);const T=l[e.ELEMENT_SELECT_REMOVE];T[e.ATTRIBUTE_HTML]="&times;",T[e.ATTRIBUTES_COMMON].push({name:e.ATTRIBUTE_ARIA_LABEL,value:`remove ${t.innerText}`});const r=new SelectRemove(T);c.element.append(r.element),r.element.addEventListener(e.EVENT_MOUSEDOWN,i),r.element.addEventListener(e.EVENT_CLICK,(n=>{"mouse"===n.pointerType&&o.focus(),r.element.removeEventListener(e.EVENT_MOUSEDOWN,i),t.removeAttribute("selected"),E.visibility(!0),c.remove()}),{once:!0})}))}})(t),((t,n)=>{const E=t[e.ELEMENT_SELECT_BASE],o=t[e.ELEMENT_SELECT_MULTIPLE],i=t[e.ELEMENT_SELECT_INPUT],s=t[e.ELEMENT_SELECT_LIST];if(n.fullwidth)return void(o.element.style.width="100%");const c=E.querySelectorAll("option");let T="";for(const e of c)e.innerText.length>T.length&&(T=e.innerText);const{width:r}=s.element.getBoundingClientRect(),a=l[e.ELEMENT_SELECT_TAG];a[e.ATTRIBUTE_TEXT]=T;const u=new SelectTag(a);i.element.append(u.element);const m=l[e.ELEMENT_SELECT_REMOVE];m[e.ATTRIBUTE_HTML]="&times;";const L=new SelectRemove(m);u.element.append(L.element);const{width:_}=s.element.getBoundingClientRect(),p=r>_?r:_;i.element.style.width=`${p}px`,u.remove()})(t,n),((t,n)=>{t[e.ELEMENT_SELECT_MULTIPLE].loader(!1)})(t)}};class SelectBuilder{constructor(e,t){if(!(e instanceof HTMLSelectElement))throw new TypeError("Provided element is not an instance of HTMLSelectElement");this.config=t,this.select=e,this.wrapper=null}buildOnTopOfSelect(){const n={},E=[];n[e.ELEMENT_SELECT_BASE]=this.select,this.createChildElements(E,n,t);for(const e of E)this.customElementHandler(e,n)}removeBuiltSelect(){this.wrapper.remove()}createChildElements(e,t,n){for(const[E,i]of Object.entries(n)){const n=new o[E](l[E]);t[E]=n,null===this.wrapper&&(this.wrapper=n),s[E]instanceof Function&&e.push(s[E]),this.createChildElements(e,t,i)}}customElementHandler(e,t){e(t,this.config)}}var c=n(828);const T={[e.THEME_MODERN]:c.Z},r=e=>{const t=document.querySelector("head"),n=document.createElement("style");return n.innerHTML=e,t.append(n),n};class ConfigParser{constructor(e){this.config=e}parseConfigOptions(){return this.config&&this.config.theme&&this.config.theme.name&&!this.config.theme.styles&&T[this.config.theme.name]&&(this.config.theme.styles=T[this.config.theme.name]),this.config}}class StyleParser{constructor(e,t){this.core=e,this.theme=t,this.coreElement=null,this.themeElement=null}mountCoreStylesheet(){this.coreElement=r(this.core)}mountThemeStylesheet(){this.themeElement=r(this.theme)}removeOverlapingStyles(){for(const e of this.coreElement.sheet.cssRules)for(const t of this.themeElement.sheet.cssRules)if(e.selectorText&&e.selectorText.endsWith(t.selectorText))for(const n of t.style)e.style.removeProperty(n)}}var a=n(586);const u=function(){const t=new WeakMap,n=e=>t.get(e).builders,E=(e,n)=>{t.set(e,{builders:n})};return class SelectMultiple{static THEME_MODERN=e.THEME_MODERN;constructor(e){const t=new ConfigParser(e);this.config=t.parseConfigOptions();const n=this.config?.theme?.styles,l=new StyleParser(a.Z,n);l.mountCoreStylesheet(),l.theme&&(l.mountThemeStylesheet(),l.removeOverlapingStyles()),E(this,[])}transform(e){const t=new SelectBuilder(e,this.config),l={element:e,builder:t};E(this,[...n(this),l]),t.buildOnTopOfSelect()}transformAllSelects(e){const t=e||"select[multiple]",l=document.querySelectorAll(t);for(const e of l){const t=new SelectBuilder(e,this.config),l={element:e,builder:t};E(this,[...n(this),l]),t.buildOnTopOfSelect()}}destroy(e){const t=n(this).find((t=>t.element===e));t.builder instanceof SelectBuilder&&t.builder.removeBuiltSelect()}destroyAllSelects(e){const t=e||"select[multiple]",E=document.querySelectorAll(t);for(const e of E){const t=n(this).find((t=>t.element===e));t.builder instanceof SelectBuilder&&t.builder.removeBuiltSelect()}}}}()})(),E=E.default})()));